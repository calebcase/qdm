#include <gsl/gsl_rng.h>
#include <gsl/gsl_sort_vector.h>
#include <munit.h>

#include <qdm.h>

#include "test.h"

static
MunitResult
test_qdm_knots_vector(
    MUNIT_UNUSED const MunitParameter params[],
    MUNIT_UNUSED void* fixture
)
{
  size_t spline_df = 3;
  gsl_vector *knots_inter = qdm_vector_seq(0.1, 0.9, 0.2);

  gsl_vector *knots = qdm_knots_vector(spline_df, knots_inter);

  munit_assert_size(spline_df * 2 + knots_inter->size, ==, knots->size);

  for (size_t i = 0; i < 3; i++) {
    munit_assert_double(gsl_vector_get(knots, i), ==, 0);
  }

  for (size_t i = spline_df + knots_inter->size; i < spline_df * 2 + knots_inter->size; i++) {
    munit_assert_double(gsl_vector_get(knots, i), ==, 1);
  }

  return MUNIT_OK;
}

static
MunitResult
test_qdm_knots_optimize(
    MUNIT_UNUSED const MunitParameter params[],
    MUNIT_UNUSED void* fixture
)
{
  int status = 0;

  double tau_low = 0.01;
  double tau_high = 0.99;

  gsl_vector *result = gsl_vector_calloc(2);

  double sorted_data_data[] = {
    8.337,
    8.382,
    9.302,
    10.684,
    10.983,
    11.189,
    11.32,
    11.422,
    11.718,
    11.762,
    11.852,
    11.875,
    12.373,
    12.402,
    12.942,
    12.95,
    13.055,
    13.061,
    13.138,
    13.145,
    13.266,
    13.269,
    13.281,
    13.441,
    13.503,
    13.645,
    13.652,
    13.672,
    13.745,
    13.771,
    13.809,
    13.939,
    14.072,
    14.099,
    14.147,
    14.447,
    14.447,
    14.469,
    14.588,
    14.606,
    14.654,
    14.655,
    14.656,
    14.714,
    14.855,
    14.897,
    14.985,
    15.079,
    15.153,
    15.18,
    15.187,
    15.237,
    15.298,
    15.304,
    15.334,
    15.367,
    15.418,
    15.46,
    15.542,
    15.663,
    15.671,
    15.724,
    15.743,
    15.748,
    15.753,
    15.773,
    15.777,
    15.798,
    15.804,
    15.807,
    15.812,
    15.887,
    15.943,
    15.95,
    16.004,
    16.028,
    16.033,
    16.067,
    16.156,
    16.218,
    16.258,
    16.308,
    16.353,
    16.366,
    16.373,
    16.38,
    16.407,
    16.416,
    16.452,
    16.465,
    16.477,
    16.491,
    16.504,
    16.525,
    16.531,
    16.533,
    16.557,
    16.557,
    16.57,
    16.597,
    16.622,
    16.647,
    16.659,
    16.702,
    16.716,
    16.726,
    16.751,
    16.792,
    16.8,
    16.8,
    16.805,
    16.811,
    16.818,
    16.848,
    16.849,
    16.852,
    16.862,
    16.868,
    16.928,
    16.95,
    17.036,
    17.072,
    17.072,
    17.104,
    17.155,
    17.193,
    17.205,
    17.213,
    17.245,
    17.248,
    17.25,
    17.252,
    17.299,
    17.306,
    17.321,
    17.389,
    17.424,
    17.444,
    17.455,
    17.478,
    17.513,
    17.559,
    17.588,
    17.599,
    17.603,
    17.628,
    17.652,
    17.656,
    17.659,
    17.675,
    17.701,
    17.708,
    17.729,
    17.806,
    17.898,
    17.903,
    17.934,
    17.95,
    17.962,
    17.988,
    17.999,
    18.007,
    18.008,
    18.021,
    18.032,
    18.049,
    18.128,
    18.168,
    18.183,
    18.202,
    18.213,
    18.252,
    18.265,
    18.272,
    18.301,
    18.306,
    18.355,
    18.369,
    18.378,
    18.388,
    18.401,
    18.402,
    18.408,
    18.47,
    18.473,
    18.491,
    18.502,
    18.558,
    18.561,
    18.565,
    18.603,
    18.623,
    18.629,
    18.633,
    18.663,
    18.687,
    18.691,
    18.696,
    18.701,
    18.734,
    18.737,
    18.755,
    18.804,
    18.809,
    18.821,
    18.84,
    18.851,
    18.873,
    18.875,
    18.91,
    18.917,
    18.952,
    18.955,
    18.979,
    18.986,
    19.01,
    19.021,
    19.037,
    19.063,
    19.08,
    19.092,
    19.1,
    19.114,
    19.146,
    19.206,
    19.21,
    19.21,
    19.241,
    19.273,
    19.296,
    19.311,
    19.313,
    19.316,
    19.329,
    19.33,
    19.345,
    19.346,
    19.352,
    19.372,
    19.375,
    19.389,
    19.411,
    19.417,
    19.418,
    19.46,
    19.463,
    19.467,
    19.471,
    19.471,
    19.48,
    19.5,
    19.502,
    19.508,
    19.566,
    19.573,
    19.575,
    19.615,
    19.619,
    19.634,
    19.642,
    19.677,
    19.68,
    19.68,
    19.681,
    19.72,
    19.723,
    19.734,
    19.746,
    19.754,
    19.761,
    19.779,
    19.793,
    19.797,
    19.806,
    19.811,
    19.811,
    19.82,
    19.822,
    19.822,
    19.844,
    19.856,
    19.862,
    19.891,
    19.906,
    19.932,
    19.932,
    19.934,
    19.939,
    19.946,
    19.965,
    19.965,
    19.968,
    19.999,
    20.019,
    20.021,
    20.065,
    20.095,
    20.116,
    20.139,
    20.155,
    20.182,
    20.183,
    20.199,
    20.217,
    20.219,
    20.222,
    20.243,
    20.245,
    20.265,
    20.275,
    20.28,
    20.282,
    20.285,
    20.287,
    20.295,
    20.298,
    20.352,
    20.361,
    20.41,
    20.458,
    20.46,
    20.474,
    20.521,
    20.532,
    20.534,
    20.536,
    20.541,
    20.543,
    20.543,
    20.543,
    20.545,
    20.547,
    20.552,
    20.584,
    20.59,
    20.626,
    20.63,
    20.634,
    20.645,
    20.645,
    20.657,
    20.666,
    20.679,
    20.693,
    20.696,
    20.7,
    20.708,
    20.763,
    20.765,
    20.774,
    20.776,
    20.779,
    20.783,
    20.837,
    20.858,
    20.876,
    20.886,
    20.886,
    20.894,
    20.9,
    20.901,
    20.909,
    20.909,
    20.916,
    20.919,
    20.925,
    20.931,
    20.931,
    20.937,
    20.941,
    20.953,
    20.968,
    20.997,
    21.012,
    21.017,
    21.042,
    21.052,
    21.053,
    21.092,
    21.094,
    21.095,
    21.103,
    21.109,
    21.113,
    21.117,
    21.146,
    21.158,
    21.166,
    21.173,
    21.196,
    21.228,
    21.235,
    21.255,
    21.265,
    21.273,
    21.295,
    21.314,
    21.315,
    21.319,
    21.324,
    21.333,
    21.337,
    21.338,
    21.341,
    21.347,
    21.385,
    21.387,
    21.392,
    21.394,
    21.394,
    21.422,
    21.446,
    21.456,
    21.483,
    21.484,
    21.486,
    21.499,
    21.503,
    21.512,
    21.519,
    21.524,
    21.525,
    21.541,
    21.554,
    21.562,
    21.576,
    21.588,
    21.589,
    21.594,
    21.628,
    21.632,
    21.638,
    21.643,
    21.65,
    21.672,
    21.673,
    21.679,
    21.682,
    21.691,
    21.72,
    21.725,
    21.732,
    21.736,
    21.744,
    21.749,
    21.749,
    21.751,
    21.772,
    21.783,
    21.784,
    21.789,
    21.791,
    21.799,
    21.799,
    21.802,
    21.834,
    21.842,
    21.849,
    21.852,
    21.855,
    21.866,
    21.869,
    21.871,
    21.878,
    21.882,
    21.883,
    21.892,
    21.896,
    21.909,
    21.913,
    21.925,
    21.929,
    21.935,
    21.942,
    21.951,
    21.966,
    21.967,
    21.987,
    21.988,
    21.989,
    22.005,
    22.015,
    22.02,
    22.024,
    22.038,
    22.064,
    22.064,
    22.074,
    22.082,
    22.091,
    22.1,
    22.103,
    22.106,
    22.107,
    22.111,
    22.112,
    22.132,
    22.135,
    22.136,
    22.143,
    22.157,
    22.165,
    22.178,
    22.18,
    22.201,
    22.208,
    22.214,
    22.217,
    22.22,
    22.221,
    22.23,
    22.24,
    22.242,
    22.25,
    22.255,
    22.261,
    22.272,
    22.274,
    22.283,
    22.284,
    22.308,
    22.309,
    22.312,
    22.321,
    22.323,
    22.329,
    22.334,
    22.345,
    22.352,
    22.358,
    22.373,
    22.375,
    22.377,
    22.384,
    22.39,
    22.404,
    22.416,
    22.422,
    22.43,
    22.433,
    22.433,
    22.457,
    22.473,
    22.483,
    22.484,
    22.494,
    22.501,
    22.501,
    22.504,
    22.51,
    22.526,
    22.528,
    22.543,
    22.548,
    22.55,
    22.558,
    22.57,
    22.583,
    22.59,
    22.593,
    22.597,
    22.634,
    22.634,
    22.657,
    22.661,
    22.667,
    22.679,
    22.681,
    22.682,
    22.687,
    22.693,
    22.697,
    22.7,
    22.715,
    22.715,
    22.72,
    22.741,
    22.746,
    22.759,
    22.779,
    22.779,
    22.789,
    22.789,
    22.805,
    22.814,
    22.821,
    22.821,
    22.824,
    22.824,
    22.827,
    22.833,
    22.849,
    22.854,
    22.864,
    22.875,
    22.887,
    22.908,
    22.911,
    22.917,
    22.924,
    22.925,
    22.947,
    22.954,
    22.956,
    22.985,
    22.988,
    22.995,
    23,
    23.007,
    23.041,
    23.041,
    23.093,
    23.095,
    23.095,
    23.096,
    23.098,
    23.104,
    23.109,
    23.111,
    23.112,
    23.114,
    23.124,
    23.135,
    23.141,
    23.149,
    23.151,
    23.166,
    23.167,
    23.17,
    23.172,
    23.174,
    23.185,
    23.196,
    23.197,
    23.197,
    23.204,
    23.216,
    23.233,
    23.234,
    23.245,
    23.259,
    23.263,
    23.265,
    23.274,
    23.282,
    23.297,
    23.298,
    23.298,
    23.301,
    23.31,
    23.311,
    23.317,
    23.325,
    23.335,
    23.345,
    23.347,
    23.359,
    23.36,
    23.365,
    23.369,
    23.369,
    23.37,
    23.373,
    23.377,
    23.379,
    23.393,
    23.394,
    23.398,
    23.404,
    23.414,
    23.418,
    23.422,
    23.436,
    23.437,
    23.439,
    23.466,
    23.471,
    23.476,
    23.485,
    23.489,
    23.491,
    23.499,
    23.499,
    23.503,
    23.505,
    23.515,
    23.519,
    23.519,
    23.529,
    23.532,
    23.535,
    23.546,
    23.546,
    23.551,
    23.552,
    23.554,
    23.557,
    23.558,
    23.561,
    23.563,
    23.568,
    23.569,
    23.571,
    23.572,
    23.581,
    23.588,
    23.594,
    23.602,
    23.624,
    23.629,
    23.63,
    23.649,
    23.65,
    23.652,
    23.653,
    23.66,
    23.676,
    23.684,
    23.693,
    23.696,
    23.701,
    23.705,
    23.714,
    23.717,
    23.719,
    23.727,
    23.727,
    23.729,
    23.733,
    23.743,
    23.745,
    23.746,
    23.768,
    23.773,
    23.776,
    23.786,
    23.789,
    23.79,
    23.794,
    23.803,
    23.803,
    23.807,
    23.814,
    23.819,
    23.821,
    23.822,
    23.826,
    23.826,
    23.829,
    23.839,
    23.841,
    23.853,
    23.853,
    23.854,
    23.854,
    23.855,
    23.88,
    23.882,
    23.901,
    23.905,
    23.913,
    23.918,
    23.92,
    23.92,
    23.925,
    23.928,
    23.928,
    23.929,
    23.939,
    23.94,
    23.947,
    23.949,
    23.95,
    23.95,
    23.952,
    23.962,
    23.967,
    23.977,
    23.979,
    23.982,
    23.982,
    23.987,
    23.988,
    23.994,
    23.998,
    24.002,
    24.017,
    24.021,
    24.03,
    24.034,
    24.04,
    24.068,
    24.069,
    24.081,
    24.086,
    24.094,
    24.096,
    24.103,
    24.11,
    24.112,
    24.127,
    24.131,
    24.143,
    24.153,
    24.157,
    24.163,
    24.171,
    24.172,
    24.188,
    24.189,
    24.192,
    24.192,
    24.197,
    24.204,
    24.209,
    24.233,
    24.236,
    24.244,
    24.251,
    24.255,
    24.26,
    24.273,
    24.273,
    24.274,
    24.275,
    24.278,
    24.287,
    24.298,
    24.304,
    24.307,
    24.312,
    24.314,
    24.324,
    24.327,
    24.328,
    24.332,
    24.341,
    24.368,
    24.377,
    24.379,
    24.383,
    24.387,
    24.389,
    24.395,
    24.415,
    24.428,
    24.428,
    24.45,
    24.451,
    24.452,
    24.455,
    24.471,
    24.477,
    24.479,
    24.48,
    24.481,
    24.483,
    24.485,
    24.492,
    24.494,
    24.518,
    24.529,
    24.53,
    24.534,
    24.575,
    24.58,
    24.583,
    24.584,
    24.588,
    24.59,
    24.59,
    24.592,
    24.593,
    24.606,
    24.618,
    24.633,
    24.634,
    24.636,
    24.639,
    24.658,
    24.66,
    24.663,
    24.673,
    24.676,
    24.68,
    24.691,
    24.693,
    24.716,
    24.719,
    24.72,
    24.725,
    24.727,
    24.742,
    24.745,
    24.748,
    24.764,
    24.79,
    24.805,
    24.806,
    24.808,
    24.811,
    24.812,
    24.815,
    24.829,
    24.83,
    24.833,
    24.833,
    24.834,
    24.836,
    24.84,
    24.854,
    24.855,
    24.857,
    24.858,
    24.863,
    24.863,
    24.868,
    24.869,
    24.87,
    24.873,
    24.873,
    24.876,
    24.887,
    24.896,
    24.908,
    24.908,
    24.908,
    24.909,
    24.912,
    24.914,
    24.92,
    24.921,
    24.922,
    24.922,
    24.939,
    24.939,
    24.941,
    24.943,
    24.949,
    24.952,
    24.955,
    24.959,
    24.965,
    24.968,
    24.975,
    24.979,
    24.981,
    24.983,
    24.984,
    24.987,
    24.987,
    25.001,
    25.002,
    25.005,
    25.007,
    25.009,
    25.011,
    25.016,
    25.019,
    25.021,
    25.029,
    25.032,
    25.032,
    25.034,
    25.046,
    25.057,
    25.058,
    25.068,
    25.069,
    25.077,
    25.078,
    25.082,
    25.092,
    25.096,
    25.1,
    25.105,
    25.106,
    25.109,
    25.131,
    25.132,
    25.139,
    25.146,
    25.151,
    25.161,
    25.172,
    25.173,
    25.173,
    25.173,
    25.18,
    25.182,
    25.185,
    25.202,
    25.215,
    25.221,
    25.228,
    25.238,
    25.242,
    25.251,
    25.252,
    25.257,
    25.26,
    25.279,
    25.29,
    25.295,
    25.3,
    25.302,
    25.306,
    25.306,
    25.309,
    25.31,
    25.317,
    25.325,
    25.33,
    25.334,
    25.334,
    25.337,
    25.341,
    25.35,
    25.35,
    25.351,
    25.356,
    25.358,
    25.367,
    25.375,
    25.375,
    25.377,
    25.388,
    25.394,
    25.394,
    25.396,
    25.397,
    25.406,
    25.409,
    25.424,
    25.432,
    25.443,
    25.468,
    25.478,
    25.48,
    25.486,
    25.489,
    25.505,
    25.51,
    25.517,
    25.526,
    25.528,
    25.531,
    25.536,
    25.571,
    25.582,
    25.582,
    25.582,
    25.584,
    25.589,
    25.593,
    25.595,
    25.598,
    25.606,
    25.63,
    25.647,
    25.648,
    25.655,
    25.666,
    25.667,
    25.668,
    25.669,
    25.673,
    25.678,
    25.693,
    25.699,
    25.702,
    25.706,
    25.708,
    25.721,
    25.726,
    25.728,
    25.736,
    25.741,
    25.743,
    25.744,
    25.747,
    25.754,
    25.756,
    25.758,
    25.76,
    25.767,
    25.772,
    25.774,
    25.783,
    25.784,
    25.789,
    25.789,
    25.801,
    25.809,
    25.815,
    25.823,
    25.826,
    25.829,
    25.833,
    25.845,
    25.848,
    25.871,
    25.874,
    25.878,
    25.879,
    25.88,
    25.885,
    25.901,
    25.917,
    25.925,
    25.929,
    25.93,
    25.937,
    25.94,
    25.941,
    25.954,
    25.959,
    25.963,
    25.966,
    25.979,
    25.99,
    26.001,
    26.016,
    26.019,
    26.019,
    26.021,
    26.032,
    26.033,
    26.033,
    26.037,
    26.044,
    26.047,
    26.051,
    26.053,
    26.053,
    26.071,
    26.072,
    26.093,
    26.096,
    26.102,
    26.103,
    26.113,
    26.123,
    26.142,
    26.154,
    26.159,
    26.16,
    26.161,
    26.171,
    26.172,
    26.211,
    26.22,
    26.222,
    26.225,
    26.229,
    26.233,
    26.248,
    26.262,
    26.265,
    26.265,
    26.268,
    26.27,
    26.277,
    26.289,
    26.296,
    26.316,
    26.318,
    26.325,
    26.326,
    26.338,
    26.339,
    26.342,
    26.348,
    26.35,
    26.354,
    26.358,
    26.369,
    26.386,
    26.388,
    26.388,
    26.396,
    26.402,
    26.418,
    26.423,
    26.424,
    26.428,
    26.439,
    26.452,
    26.473,
    26.484,
    26.499,
    26.515,
    26.517,
    26.521,
    26.522,
    26.543,
    26.544,
    26.546,
    26.55,
    26.551,
    26.551,
    26.557,
    26.565,
    26.575,
    26.593,
    26.598,
    26.604,
    26.61,
    26.617,
    26.625,
    26.628,
    26.639,
    26.65,
    26.658,
    26.664,
    26.67,
    26.686,
    26.687,
    26.692,
    26.695,
    26.698,
    26.698,
    26.699,
    26.706,
    26.71,
    26.726,
    26.729,
    26.732,
    26.733,
    26.742,
    26.749,
    26.75,
    26.773,
    26.791,
    26.793,
    26.803,
    26.807,
    26.816,
    26.816,
    26.823,
    26.824,
    26.824,
    26.825,
    26.828,
    26.829,
    26.83,
    26.844,
    26.854,
    26.86,
    26.879,
    26.885,
    26.89,
    26.894,
    26.901,
    26.906,
    26.913,
    26.917,
    26.924,
    26.924,
    26.926,
    26.934,
    26.939,
    26.957,
    26.965,
    26.97,
    26.972,
    26.974,
    26.977,
    26.999,
    27.011,
    27.015,
    27.019,
    27.026,
    27.027,
    27.032,
    27.036,
    27.046,
    27.048,
    27.085,
    27.092,
    27.095,
    27.107,
    27.122,
    27.123,
    27.129,
    27.13,
    27.131,
    27.14,
    27.147,
    27.149,
    27.15,
    27.161,
    27.172,
    27.177,
    27.186,
    27.188,
    27.189,
    27.198,
    27.224,
    27.224,
    27.227,
    27.24,
    27.242,
    27.243,
    27.252,
    27.255,
    27.263,
    27.276,
    27.299,
    27.305,
    27.31,
    27.31,
    27.314,
    27.321,
    27.341,
    27.349,
    27.365,
    27.374,
    27.377,
    27.381,
    27.382,
    27.383,
    27.384,
    27.385,
    27.393,
    27.397,
    27.405,
    27.409,
    27.411,
    27.42,
    27.429,
    27.445,
    27.451,
    27.467,
    27.495,
    27.495,
    27.518,
    27.547,
    27.549,
    27.562,
    27.564,
    27.578,
    27.609,
    27.613,
    27.615,
    27.621,
    27.669,
    27.67,
    27.677,
    27.703,
    27.712,
    27.713,
    27.741,
    27.746,
    27.776,
    27.783,
    27.784,
    27.79,
    27.793,
    27.797,
    27.836,
    27.843,
    27.845,
    27.868,
    27.889,
    27.892,
    27.906,
    27.913,
    27.916,
    27.927,
    27.936,
    27.948,
    27.954,
    27.964,
    27.967,
    27.972,
    27.977,
    27.997,
    28.005,
    28.018,
    28.022,
    28.038,
    28.05,
    28.061,
    28.079,
    28.091,
    28.12,
    28.123,
    28.125,
    28.13,
    28.13,
    28.154,
    28.174,
    28.223,
    28.233,
    28.234,
    28.24,
    28.254,
    28.269,
    28.279,
    28.317,
    28.326,
    28.335,
    28.339,
    28.347,
    28.374,
    28.383,
    28.407,
    28.417,
    28.428,
    28.456,
    28.518,
    28.541,
    28.547,
    28.558,
    28.563,
    28.567,
    28.59,
    28.592,
    28.659,
    28.666,
    28.687,
    28.692,
    28.706,
    28.715,
    28.722,
    28.732,
    28.741,
    28.748,
    28.75,
    28.799,
    28.823,
    28.851,
    28.854,
    28.863,
    28.907,
    28.937,
    28.944,
    28.948,
    28.949,
    28.967,
    28.974,
    28.998,
    29.03,
    29.053,
    29.054,
    29.067,
    29.139,
    29.157,
    29.194,
    29.276,
    29.28,
    29.285,
    29.29,
    29.314,
    29.323,
    29.323,
    29.344,
    29.351,
    29.393,
    29.43,
    29.545,
    29.66,
    29.687,
    29.695,
    29.695,
    29.759,
    29.762,
    29.786,
    29.794,
    29.815,
    29.819,
    29.824,
    29.839,
    29.934,
    29.948,
    29.969,
    29.979,
    29.998,
    30.061,
    30.083,
    30.147,
    30.213,
    30.257,
    30.271,
    30.419,
    30.449,
    30.484,
    30.614,
    30.698,
    30.715,
    30.881,
    30.899,
    31.049,
    31.191,
    31.254,
    31.272,
    31.314,
    32.245,
    32.761,
  };

  gsl_vector_view sorted_data = gsl_vector_view_array(sorted_data_data, 1500);

  gsl_vector *middle = qdm_vector_seq(tau_low, tau_high, 0.005);

  double possible_low = tau_low + 0.1;
  double possible_high = tau_high - 0.1;
  double possible_delta = (possible_high - possible_low) / 19;

  gsl_vector *possible_knots = qdm_vector_seq(possible_low, possible_high, possible_delta);
  munit_log_vector(MUNIT_LOG_DEBUG, possible_knots);

  size_t iterate_n = 1000;
  size_t spline_df = 3;

  munit_log_vector_dim(MUNIT_LOG_DEBUG, result);
  munit_log_vector_dim(MUNIT_LOG_DEBUG, &sorted_data.vector);
  munit_log_vector_dim(MUNIT_LOG_DEBUG, middle);
  munit_log_vector_dim(MUNIT_LOG_DEBUG, possible_knots);
  munit_log_size(MUNIT_LOG_DEBUG, iterate_n);
  munit_log_size(MUNIT_LOG_DEBUG, spline_df);

  gsl_rng *rng = gsl_rng_alloc(gsl_rng_default);
  gsl_rng_set(rng, 100);

  status = qdm_knots_optimize(
      result,

      rng,

      &sorted_data.vector,
      middle,
      possible_knots,

      iterate_n,
      spline_df
  );
  munit_assert_int(status, ==, 0);

  munit_log_vector(MUNIT_LOG_DEBUG, result);

  munit_assert_double_equal(gsl_vector_get(result, 0), 0.15105263157894738, 10);
  munit_assert_double_equal(gsl_vector_get(result, 1), 0.89000000000000001, 10);

  return MUNIT_OK;
}

MunitTest tests_knots[] = {
  {
    "/qdm_knots_vector"   , // name
    test_qdm_knots_vector , // test
    NULL                  , // setup
    NULL                  , // tear_down
    MUNIT_TEST_OPTION_NONE, // options
    NULL                  , // parameters
  },
  {
    "/qdm_knots_optimize"  , // name
    test_qdm_knots_optimize, // test
    NULL                   , // setup
    NULL                   , // tear_down
    MUNIT_TEST_OPTION_NONE , // options
    NULL                   , // parameters
  },
  { NULL, NULL, NULL, NULL, MUNIT_TEST_OPTION_NONE, NULL },
};

static const MunitSuite test_suite_knots = {
  "/knots"               , // name
  tests_knots            , // tests
  NULL                   , // suites
  1                      , // iterations
  MUNIT_SUITE_OPTION_NONE, // options
};
